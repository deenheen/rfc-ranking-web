<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì‹¤ì‹œê°„ ì „ì íŒ</title>
    <style>
        /* ê°„ë‹¨í•œ ë””ìì¸ */
        body { font-family: sans-serif; text-align: center; padding: 20px; }
        .card { border: 1px solid #ddd; margin: 10px auto; padding: 15px; width: 300px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .score { font-size: 20px; font-weight: bold; color: #333; }
    </style>
</head>
<body>

    <h1>ğŸ† ì‹¤ì‹œê°„ ë­í‚¹ ğŸ†</h1>
    <div id="score-board">
        <p>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>

    <script type="module">
        // Firebase ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // ---------------------------------------------------------
        // [ì¤‘ìš”] ì•„ê¹Œ ë³µì‚¬í•œ í‚¤ ì½”ë“œë¥¼ ì•„ë˜ ê´„í˜¸ ì•ˆì— ë®ì–´ì”Œìš°ì„¸ìš”!
        // const firebaseConfig = { ... } ì´ ë¶€ë¶„ì„ í†µì§¸ë¡œ ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.
        // ---------------------------------------------------------
        
        // (ì—¬ê¸°ì— firebaseConfig ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”)
        const firebaseConfig = {
  apiKey: "AIzaSyDlj68ex-fM0ExRdD-tvCy-UyIneVoPmGk",
  authDomain: "rfk-ranking.firebaseapp.com",
  projectId: "rfk-ranking",
  storageBucket: "rfk-ranking.firebasestorage.app",
  messagingSenderId: "675366165774",
  appId: "1:675366165774:web:795d34c56eab630b4dcb5f",
  measurementId: "G-CXPDZQ8GTL"
};
        // ---------------------------------------------------------

        // Firebase ì‹¤í–‰
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ìŠ¹ë¦¬ ë§ì€ ìˆœì„œë¡œ ì •ë ¬)
        const q = query(collection(db, "players"), orderBy("win", "desc"));

        // ì‹¤ì‹œê°„ ê°ì‹œ (onSnapshot)
        onSnapshot(q, (snapshot) => {
            const board = document.getElementById("score-board");
            board.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì§€ìš°ê¸°

            snapshot.forEach((doc) => {
                const data = doc.data();
                const rate = (data.win + data.lose) === 0 ? 0 : Math.round((data.win / (data.win + data.lose)) * 100);
                
                // ì¹´ë“œ ëª¨ì–‘ ë§Œë“¤ê¸°
                const card = `
                    <div class="card">
                        <h2>${data.name}</h2>
                        <div class="score">${data.win}ìŠ¹ ${data.lose}íŒ¨ (${rate}%)</div>
                    </div>
                `;
                board.innerHTML += card;
            });
        });
    </script>
</body>
</html>

